@import resources._
@main("Megift"){

<div id="landing-page" class="row bg-landing-page">
   <div class="bg-overlay">
	   <div class="col-md-12">
	      <div class="row">
	        <br/>
	        <div class="col-md-12 center">
	         <div id="alert"></div>
	        </div>
	      </div>
	      <div class="row">
	        <div class="col-md-12 logo">
	          <a href="#"><img src="@routes.Assets.at("images/logo.png")" alt="megift"/></a>
	        </div>
	      </div>
	      <br/>
	      <div class="row" id="main-text">	        
	        <div class="col-md-12 text-landing-page">
	          <p>&iexcl;Muy Pronto! Recibir&aacute;s regalos por hacer lo que m&aacute;s te gusta.</p>
	        </div>
	      </div>
	      <div class="row">
	        <div class="col-md-12 text-landing-page text-landing-page-small">
	          <p>Solicita tu invitaci&oacute;n para ser uno de los primeros en usar megift.</p>
	        </div>
	      </div>
	      <div class="row">
	        <div class="col-md-12">
	          <form id="frm-register" action="/registerUser" class="form-inline center">
				  <div class="form-group">			    
				    <input type="text" name="user-name"	data-required="true"  class="form-control form-control-lg" placeholder="Nombre"/>
				  </div>
				  <div class="form-group">			    
				    <input type="text" name="user-email" data-required="true" data-email="true" class="form-control form-control-lg" placeholder="Correo"/>
				  </div>				  
				  <div class="form-group">
				   <button type="button" id="btn-register" class="btn btn-primary btn-lg form-control"><i id="ico-register" class="fa fa-envelope fa-lg"></i>&nbsp;&nbsp;Solicitar Invitaci&oacute;n</button>
				  </div>
				</form>
	        </div>
	      </div>
	      <div  class="row">
	        <div id="counter-users" class="col-md-6 col-md-offset-3 text-landing-page text-landing-page-small">
	          <p><span id="total-users">1000</span>&nbsp;<i class="fa fa-users"></i></p>
	        </div>
	      </div>
	      <div class="row">
	        <div class="col-md-12">   
	            <form id="frm-social-media" class="form-inline center">        
		           <a href="#" class="btn btn-primary"><i class="fa fa-twitter"></i></a>
		           <a href="https://www.facebook.com/megiftcolombia" target="_blank"  class="btn btn-primary"><i class="fa fa-facebook" ></i></a>
		           <a href="#" class="btn btn-primary"><i class="fa fa-instagram"></i></a>
		           <a href="#" class="btn btn-primary"><i class="fa fa-google-plus"></i></a>
		       </form>
	        </div>
	      </div>
	   </div>      
   </div>
</div>

 <div  id="popup-register-success" class="ui-popup-panel">   
   <h1 class="text-primary">&iexcl;Felicitaciones!</h1>
<!--    <h3 class="text-muted">Recibir&aacute;s una invitaci&oacute;n en t&uacute; correo electr&oacute;nico. -->
<!--     Cu&eacute;ntale a tus amigos para que no pierdan esta oportunidad.</h3> -->
<!--    <br/> -->
<!--    <button type="button" id="btn-invite" class="btn btn-primary btn-lg pull-right">Invitar</button>    -->
  <h3 class="text-muted">Muy pronto Recibir&aacute;s una invitaci&oacute;n para descargar Megift en tu celular.
     Cu&eacute;ntale a tus amigos para que no pierdan esta oportunidad.</h3>     
      <button type="button" id="btn-invite" class="btn btn-primary btn-lg pull-right">Aceptar</button>
</div>
<script>
var objAlert = new Alert(document.getElementById('alert'));
var animationTotalusers = new Animation('ui-ease', 'ui-tada', 'ui-1s', 1000);
var frmRegister = document.getElementById('frm-register');
var btnRegister = document.getElementById('btn-register');
var popupRegister = new Popup(document.getElementById('popup-register-success'));
popupRegister.close();
resize();
function resize(){
	var body = document.body,html = document.documentElement;
	var width = Math.max( body.scrollWidth, body.offsetWidth,html.clientWidth, html.scrollWidth, html.offsetWidth);
	var landingPage = document.getElementById('landing-page');
	if(width <= 1280){
		if(!landingPage.classList.contains('bg-landing-page-mobile')){
			landingPage.classList.add('bg-landing-page-mobile');			
		}
	}else{	
		if(landingPage.classList.contains('bg-landing-page-mobile')){
			landingPage.classList.remove('bg-landing-page-mobile');
		}	
	}
}
window.onresize = function(e) {
    resize();
};


Http.get('/countUsers',null, function (xhr) {	
	document.getElementById('total-users').textContent = 1000 + parseInt(xhr.responseText);    
});


btnRegister.onclick = function(){
	var userName = document.getElementsByName('user-name')[0];
	var userEmail = document.getElementsByName('user-email')[0];
	if(Form.isFullName(userName.value)){
		 if(Form.isEmail(userEmail.value)){
				Http.post(Utils.serialize(frmRegister), frmRegister.action, function(){
			 		btnRegister.disabled = true;
					document.getElementById('ico-register').className = 'fa fa-spinner fa-spin';
				}, function(xhr){
			 		btnRegister.disabled = false;
					document.getElementById('ico-register').className = 'fa fa-envelope-o fa-lg';
					if(xhr.responseText > 0){	
						objAlert.close();
						popupRegister.show();
						var totalUser = document.getElementById('total-users');
						totalUser.textContent = 1000 + parseInt(xhr.responseText);
						animationTotalusers.run(document.getElementById('counter-users'));			
					}else{
						objAlert.danger(xhr.responseText);			
					}		
				});			
			}else{
				objAlert.warning('Por favor ingrese un correo valido!');
			}
	}else {
		objAlert.warning('Por favor ingrese un nombre valido!');
	}
 }

document.getElementById('btn-invite').onclick = function(){
	popupRegister.close();
}



</script>


}